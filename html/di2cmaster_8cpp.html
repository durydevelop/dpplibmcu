<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: src/di2c/di2cmaster.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_50099993e974021dbea636e997593318.html">di2c</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">di2cmaster.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to handle i2c master comunication node.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="di2cmaster_8h_source.html">di2cmaster.h</a>&quot;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;linux/i2c-dev.h&gt;</code><br />
<code>#include &lt;linux/i2c.h&gt;</code><br />
<code>#include &lt;sys/ioctl.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;byteswap.h&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for di2cmaster.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="di2cmaster_8cpp__incl.png" border="0" usemap="#asrc_2di2c_2di2cmaster_8cpp" alt=""/></div>
<map name="asrc_2di2c_2di2cmaster_8cpp" id="asrc_2di2c_2di2cmaster_8cpp">
<area shape="rect" title="Class to handle i2c master comunication node." alt="" coords="609,5,783,32"/>
<area shape="rect" href="di2cmaster_8h.html" title=" " alt="" coords="72,80,179,107"/>
<area shape="rect" title=" " alt="" coords="203,80,266,107"/>
<area shape="rect" title=" " alt="" coords="291,80,408,107"/>
<area shape="rect" title=" " alt="" coords="433,80,522,107"/>
<area shape="rect" title=" " alt="" coords="547,80,635,107"/>
<area shape="rect" title=" " alt="" coords="659,80,733,107"/>
<area shape="rect" title=" " alt="" coords="758,80,826,107"/>
<area shape="rect" title=" " alt="" coords="850,80,921,107"/>
<area shape="rect" title=" " alt="" coords="945,80,1042,107"/>
<area shape="rect" title=" " alt="" coords="1067,80,1147,107"/>
<area shape="rect" title=" " alt="" coords="1171,80,1221,107"/>
<area shape="rect" title=" " alt="" coords="5,155,72,181"/>
<area shape="rect" title=" " alt="" coords="96,155,155,181"/>
<area shape="rect" title=" " alt="" coords="179,155,229,181"/>
</map>
</div>
</div>
<p><a href="di2cmaster_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a00be6c40bc7a1297ada4d47a028066b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="di2cmaster_8cpp.html#a00be6c40bc7a1297ada4d47a028066b8">LOWORD</a>(l)&#160;&#160;&#160;((unsigned short)(l))</td></tr>
<tr class="separator:a00be6c40bc7a1297ada4d47a028066b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb28b2d61bd674900a89bfb77e28ae07"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="di2cmaster_8cpp.html#aeb28b2d61bd674900a89bfb77e28ae07">HIWORD</a>(l)&#160;&#160;&#160;((unsigned short)(((unsigned int)(l) &gt;&gt; 16) &amp; 0xFFFF))</td></tr>
<tr class="separator:aeb28b2d61bd674900a89bfb77e28ae07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04c0416272e5c07bdf955d803a21688e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="di2cmaster_8cpp.html#a04c0416272e5c07bdf955d803a21688e">LOBYTE</a>(w)&#160;&#160;&#160;((uint8_t)(w&amp;0x00FF))</td></tr>
<tr class="separator:a04c0416272e5c07bdf955d803a21688e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75c5b5f21e837e80c0feb4da9a421f87"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="di2cmaster_8cpp.html#a75c5b5f21e837e80c0feb4da9a421f87">HIBYTE</a>(w)&#160;&#160;&#160;((uint8_t)((w&gt;&gt;8)&amp;0x00FF))</td></tr>
<tr class="separator:a75c5b5f21e837e80c0feb4da9a421f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d2d73912959a6c90dfe25426d40ad8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="di2cmaster_8cpp.html#a15d2d73912959a6c90dfe25426d40ad8">WORD</a>(msb,  lsb)&#160;&#160;&#160;((msb &lt;&lt; 8) | lsb)</td></tr>
<tr class="separator:a15d2d73912959a6c90dfe25426d40ad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1034fc7902bf508a2413dfa8f3ef6751"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="di2cmaster_8cpp.html#a1034fc7902bf508a2413dfa8f3ef6751">DWORD</a>(msw,  lsw)&#160;&#160;&#160;((msw &lt;&lt; 16) | lsw)</td></tr>
<tr class="separator:a1034fc7902bf508a2413dfa8f3ef6751"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ddf1e74c041bdeb9c9f03db313ac5d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="di2cmaster_8cpp.html#a27ddf1e74c041bdeb9c9f03db313ac5d">DWORD_B</a>(msb,  next_msb,  next_lsb,  lsb)&#160;&#160;&#160;(msb &lt;&lt; 24) | (next_msb &lt;&lt; 16) | (next_lsb &lt;&lt; 8) | lsb</td></tr>
<tr class="separator:a27ddf1e74c041bdeb9c9f03db313ac5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to handle i2c master comunication node. </p>
<dl class="section author"><dt>Author</dt><dd>your name (<a href="#" onclick="location.href='mai'+'lto:'+'you'+'@d'+'oma'+'in'+'.co'+'m'; return false;">you@d<span style="display: none;">.nosp@m.</span>omai<span style="display: none;">.nosp@m.</span>n.com</a>)</dd></dl>
<p>There are three type of API for sending data: 1 - Methods that starts with write...() like writeByte(), writeBuf(), etc; these methods needs a command (aka register) and data. usually used to comunicate with sensor boards. 2 - Methods that starts with AskFor...() like askForByte(), askForBuf(), etc; these methods are same as write...() ones but after send command and data, wait for data back from slave. 3 - Methods that start with send...() like sendByte(), sendBuf(), etc; these methods does not need command: the buffer is sent arbitrary as passed. Usually used for data comunication though devices, like rpi to arduino, arduino to arduino, etc.</p>
<p>N.B. Arduino Wire library set limit of each i2c transaction to 32 bytes, in this case, setting i2cMaxBufferLenght to 32, the class handle it by it self:</p><ul>
<li>If value is 0, no limit are set.</li>
<li>If value is greater than 0, write...() and askFor...() API truncate buffer of each transaction to this value (like arduino do), send...() API do as many transaction as need to send all data.</li>
</ul>
<p>How to use:</p>
<div class="fragment"><div class="line"><a class="code" href="classDI2CBus.html">DI2CBus</a> i2cBus(busID);</div>
<div class="line"><a class="code" href="classDI2CMaster.html">DI2CMaster</a> attiny(i2cBus.handle());</div>
<div class="ttc" id="aclassDI2CBus_html"><div class="ttname"><a href="classDI2CBus.html">DI2CBus</a></div><div class="ttdef"><b>Definition:</b> <a href="di2cbus_8h_source.html#l00010">di2cbus.h:10</a></div></div>
<div class="ttc" id="aclassDI2CMaster_html"><div class="ttname"><a href="classDI2CMaster.html">DI2CMaster</a></div><div class="ttdef"><b>Definition:</b> <a href="di2cmaster_8h_source.html#l00008">di2cmaster.h:8</a></div></div>
</div><!-- fragment --><dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024-04-19</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2024 </dd></dl>

<p class="definition">Definition in file <a class="el" href="di2cmaster_8cpp_source.html">di2cmaster.cpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1034fc7902bf508a2413dfa8f3ef6751"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1034fc7902bf508a2413dfa8f3ef6751">&#9670;&nbsp;</a></span>DWORD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DWORD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msw, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">lsw&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((msw &lt;&lt; 16) | lsw)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="di2cmaster_8cpp_source.html#l00047">47</a> of file <a class="el" href="di2cmaster_8cpp_source.html">di2cmaster.cpp</a>.</p>

</div>
</div>
<a id="a27ddf1e74c041bdeb9c9f03db313ac5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27ddf1e74c041bdeb9c9f03db313ac5d">&#9670;&nbsp;</a></span>DWORD_B</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DWORD_B</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">next_msb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">next_lsb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">lsb&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(msb &lt;&lt; 24) | (next_msb &lt;&lt; 16) | (next_lsb &lt;&lt; 8) | lsb</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="di2cmaster_8cpp_source.html#l00048">48</a> of file <a class="el" href="di2cmaster_8cpp_source.html">di2cmaster.cpp</a>.</p>

</div>
</div>
<a id="a75c5b5f21e837e80c0feb4da9a421f87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75c5b5f21e837e80c0feb4da9a421f87">&#9670;&nbsp;</a></span>HIBYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HIBYTE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">w</td><td>)</td>
          <td>&#160;&#160;&#160;((uint8_t)((w&gt;&gt;8)&amp;0x00FF))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="di2cmaster_8cpp_source.html#l00045">45</a> of file <a class="el" href="di2cmaster_8cpp_source.html">di2cmaster.cpp</a>.</p>

</div>
</div>
<a id="aeb28b2d61bd674900a89bfb77e28ae07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb28b2d61bd674900a89bfb77e28ae07">&#9670;&nbsp;</a></span>HIWORD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HIWORD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">l</td><td>)</td>
          <td>&#160;&#160;&#160;((unsigned short)(((unsigned int)(l) &gt;&gt; 16) &amp; 0xFFFF))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="di2cmaster_8cpp_source.html#l00043">43</a> of file <a class="el" href="di2cmaster_8cpp_source.html">di2cmaster.cpp</a>.</p>

</div>
</div>
<a id="a04c0416272e5c07bdf955d803a21688e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04c0416272e5c07bdf955d803a21688e">&#9670;&nbsp;</a></span>LOBYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOBYTE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">w</td><td>)</td>
          <td>&#160;&#160;&#160;((uint8_t)(w&amp;0x00FF))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="di2cmaster_8cpp_source.html#l00044">44</a> of file <a class="el" href="di2cmaster_8cpp_source.html">di2cmaster.cpp</a>.</p>

</div>
</div>
<a id="a00be6c40bc7a1297ada4d47a028066b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00be6c40bc7a1297ada4d47a028066b8">&#9670;&nbsp;</a></span>LOWORD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOWORD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">l</td><td>)</td>
          <td>&#160;&#160;&#160;((unsigned short)(l))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="di2cmaster_8cpp_source.html#l00042">42</a> of file <a class="el" href="di2cmaster_8cpp_source.html">di2cmaster.cpp</a>.</p>

</div>
</div>
<a id="a15d2d73912959a6c90dfe25426d40ad8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15d2d73912959a6c90dfe25426d40ad8">&#9670;&nbsp;</a></span>WORD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WORD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msb, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">lsb&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((msb &lt;&lt; 8) | lsb)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="di2cmaster_8cpp_source.html#l00046">46</a> of file <a class="el" href="di2cmaster_8cpp_source.html">di2cmaster.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
